<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leetcode Problem Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    body {
      font-family: 'Poppins', Arial, sans-serif;
      background-color: #f5f5f5;
      padding: 20px;
      font-size: 13px;
    }

    h2 {
      text-align: center;
      margin-bottom: 10px;
    }

    #headerSummary {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 0 auto 15px auto;
      width: 95%;
      font-weight: 600;
      font-size: 14px;
    }

    #totalProblems {
      color: #6b46c1;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    #summary {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    #inputSection {
      text-align: center;
      margin-bottom: 10px;
    }

    input,
    select {
      padding: 6px;
      font-size: 13px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-right: 5px;
    }

    button {
      padding: 6px 12px;
      font-size: 12px;
      cursor: pointer;
      margin-left: 5px;
      border: none;
      border-radius: 8px;
    }

    #message {
      text-align: center;
      font-size: 13px;
      padding: 6px 10px;
      display: none;
      border-radius: 5px;
      margin: 0 auto 10px auto;
      width: 94%;
    }

    .success {
      color: #2f855a;
      background-color: #c6f6d5;
    }

    .error {
      color: #c53030;
      background-color: #fde2e2;
    }

    table {
      width: 95%;
      margin: 0 auto;
      border-collapse: collapse;
      border: none;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    th,
    td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ccc;
    }

    th {
      background-color: #f2f2f2;
      position: sticky;
      top: 0;
      z-index: 2;
    }

    .statusBtn.pending {
      color: #f56565;
      font-weight: bold;
      background: none;
      border: none;
    }

    .statusBtn.completed {
      color: #48bb78;
      font-weight: bold;
      background: none;
      border: none;
    }

    .statusBtn.upcoming {
      color: #3182ce;
      font-weight: bold;
      background: none;
      border: none;
    }

    .statusBtn.reached {
      color: #d69e2e;
      font-weight: bold;
      background: none;
      border: none;
    }

    .editBtn {
      background-color: #3182ce;
      color: #fff;
    }

    .deleteBtn {
      background-color: #e53e3e;
      color: #fff;
    }

    tr.completed {
      background-color: #c6f6d5;
    }

    tr.pending {
      background-color: #fae0e0;
    }

    tr.upcoming {
      background-color: #d0ebff;
    }

    tr.reached {
      background-color: #fff3cd;
    }

    /* Export/Import buttons */
    #backupSection {
      text-align: center;
      margin: 15px 0;
    }
  </style>
</head>

<body>
  <h2>Leetcode Problem Tracker</h2>

  <!-- Top summary -->
  <div id="headerSummary">
    <div id="totalProblems">
      <i class="fa-solid fa-list-check"></i> Total Problems: <span id="totalCount">0</span>
    </div>
    <div id="summary">
      <div style="color:#f56565;">
        <i class="fa-solid fa-hourglass-half"></i> Pending: <span id="pendingCount">0</span>
      </div>
      <div style="color:#48bb78;">
        <i class="fa-solid fa-trophy"></i> Completed: <span id="completedCount">0</span>
      </div>
      <div style="color:#3182ce;">
        <i class="fa-solid fa-arrow-up"></i> Upcoming: <span id="upcomingCount">0</span>
      </div>
      <div style="color:#d69e2e;">
        <i class="fa-solid fa-bell"></i> Reached: <span id="reachedCount">0</span>
      </div>
    </div>
  </div>

  <!-- Input section -->
  <div id="inputSection">
    <input type="number" id="problemId" placeholder="Problem ID" />
    <select id="problemType">
      <option value="">Type</option>
      <option value="Easy" selected>Easy</option>
      <option value="Medium">Medium</option>
      <option value="Hard">Hard</option>
    </select>
    <input type="date" id="postDate" placeholder="Post Date" />
    <label style="font-size:13px;margin-left:10px;">
      <input type="checkbox" id="requireAll" />
      <i class="fa-solid fa-clock"></i> time schedule
    </label>
    <button id="addBtn"><i class="fa-solid fa-plus"></i> Add Problem</button>
  </div>

  <div id="message"></div>

  <!-- Export/Import -->
  <div id="backupSection">
    <button onclick="exportData()"><i class="fa-solid fa-file-export"></i> Export Data</button>
    <input type="file" id="importFile" style="display:none" onchange="importData(event)">
    <button onclick="document.getElementById('importFile').click()"><i class="fa-solid fa-file-import"></i> Import Data</button>
  </div>

  <!-- Table -->
  <table id="problemsTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Type</th>
        <th>Post Date</th>
        <th>Status</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <p style="text-align: center;">&#10003; if you click time schedule you defenitely fill all fields</p>
  <p style="font-size:12px; color:#444; text-align:center; margin-bottom:8px;">
    ðŸ“¢ Status Info: ðŸŸ¦ Upcoming = Future date | ðŸŸ¨ Date Reached = Today | ðŸ”´ Pending = Pending task | ðŸŸ© Completed =
    Done
  </p>

  <script>
    let problems = JSON.parse(localStorage.getItem("problems")) || [];

    const inputId = document.getElementById("problemId");
    const inputType = document.getElementById("problemType");
    const inputDate = document.getElementById("postDate");
    const requireAll = document.getElementById("requireAll");
    const addBtn = document.getElementById("addBtn");
    const messageDiv = document.getElementById("message");
    const pendingCount = document.getElementById("pendingCount");
    const completedCount = document.getElementById("completedCount");
    const upcomingCount = document.getElementById("upcomingCount");
    const reachedCount = document.getElementById("reachedCount");
    const totalCount = document.getElementById("totalCount");

    function saveToLocalStorage() {
      localStorage.setItem("problems", JSON.stringify(problems));
    }

    function showMessage(text, type = "success") {
      messageDiv.style.display = "block";
      messageDiv.textContent = text;
      messageDiv.className = type;
      setTimeout(() => { messageDiv.style.display = "none"; }, 2500);
    }

    function updateSummary() {
      const today = new Date().toISOString().split('T')[0];
      const pending = problems.filter(p => p.status === "pending" && p.postDate < today).length;
      const completed = problems.filter(p => p.status === "completed").length;
      const upcoming = problems.filter(p => p.status === "pending" && p.postDate > today).length;
      const reached = problems.filter(p => p.status === "pending" && p.postDate === today).length;
      const total = problems.length;

      pendingCount.textContent = pending;
      completedCount.textContent = completed;
      upcomingCount.textContent = upcoming;
      reachedCount.textContent = reached;
      totalCount.textContent = total;
    }

    function renderTable() {
      const today = new Date().toISOString().split('T')[0];
      const tbody = document.querySelector("#problemsTable tbody");
      tbody.innerHTML = "";

      problems.forEach(p => {
        const tr = document.createElement("tr");

        if (p.status === "completed") tr.className = "completed";
        else if (p.postDate > today) tr.className = "upcoming";
        else if (p.postDate === today && p.status === "pending") tr.className = "reached";
        else tr.className = "pending";

        const tdId = document.createElement("td"); tdId.textContent = p.id;
        const tdType = document.createElement("td"); tdType.textContent = p.type || "-";
        const tdDate = document.createElement("td"); tdDate.textContent = p.postDate || "-";

        const tdStatus = document.createElement("td");
        const statusBtn = document.createElement("button");
        if (p.status === "completed") {
          statusBtn.innerHTML = `<i class="fa-solid fa-trophy"></i> Completed`;
          statusBtn.className = "statusBtn completed";
        } else if (p.postDate > today) {
          statusBtn.innerHTML = `<i class="fa-solid fa-arrow-up"></i> Upcoming`;
          statusBtn.className = "statusBtn upcoming";
        } else if (p.postDate === today) {
          statusBtn.innerHTML = `<i class="fa-solid fa-bell"></i> Date Reached`;
          statusBtn.className = "statusBtn reached";
        } else {
          statusBtn.innerHTML = `<i class="fa-solid fa-hourglass-half"></i> Pending`;
          statusBtn.className = "statusBtn pending";
        }
        statusBtn.onclick = () => toggleStatus(p.id);
        tdStatus.appendChild(statusBtn);

        const tdEdit = document.createElement("td");
        const editBtn = document.createElement("button");
        editBtn.innerHTML = '<i class="fa-solid fa-pen"></i>';
        editBtn.className = "editBtn";
        editBtn.onclick = () => editRow(p.id, tdId, tdDate, editBtn);
        tdEdit.appendChild(editBtn);

        const tdDelete = document.createElement("td");
        const deleteBtn = document.createElement("button");
        deleteBtn.innerHTML = '<i class="fa-solid fa-trash"></i>';
        deleteBtn.className = "deleteBtn";
        deleteBtn.onclick = () => deleteProblem(p.id);
        tdDelete.appendChild(deleteBtn);

        tr.appendChild(tdId);
        tr.appendChild(tdType);
        tr.appendChild(tdDate);
        tr.appendChild(tdStatus);
        tr.appendChild(tdEdit);
        tr.appendChild(tdDelete);

        tbody.appendChild(tr);
      });

      updateSummary();
    }

    function checkProblem() {
      const idVal = parseInt(inputId.value);
      const typeVal = inputType.value;
      const dateVal = inputDate.value;
      const mustFill = requireAll.checked;

      if (!idVal) return showMessage("Problem ID is required", "error");
      if (mustFill && (!typeVal || !dateVal)) return showMessage("Fill all fields", "error");

      const existing = problems.find(p => p.id === idVal);
      if (existing) {
        return showMessage(`Problem ${idVal} already exists`, "error");
      }

      problems.push({
        id: idVal,
        type: typeVal || "-",
        postDate: dateVal || "-",
        status: "pending"
      });
      saveToLocalStorage();
      showMessage(`New problem ${idVal} added âœ…`, "success");

      inputId.value = ""; inputType.value = "Easy"; inputDate.value = "";
      renderTable();
    }

    function toggleStatus(id) {
      const problem = problems.find(p => p.id === id);
      if (problem) {
        problem.status = problem.status === "pending" ? "completed" : "pending";
        saveToLocalStorage();
        showMessage(`Problem ${id} status changed to ${problem.status.toUpperCase()}`, "success");
        renderTable();
      }
    }

    function editRow(id, tdId, tdDate, editBtn) {
      const problem = problems.find(p => p.id === id);
      if (!problem) return;

      tdId.innerHTML = `<input type="number" value="${problem.id}" style="width:60px;">`;
      tdDate.innerHTML = `<input type="date" value="${problem.postDate}">`;

      editBtn.textContent = "Save";
      editBtn.onclick = () => {
        const newId = parseInt(tdId.querySelector("input").value);
        const newDate = tdDate.querySelector("input").value;

        if (isNaN(newId)) return showMessage("Invalid ID", "error");
        if (!newDate) return showMessage("Date required", "error");

        problem.id = newId;
        problem.postDate = newDate;
        saveToLocalStorage();
        showMessage(`Problem updated: ID=${newId}, Date=${newDate}`, "success");
        renderTable();
      };
    }

    function deleteProblem(id) {
      problems = problems.filter(p => p.id !== id);
      saveToLocalStorage();
      showMessage(`Problem ${id} deleted`, "success");
      renderTable();
    }

    // ðŸ”¹ Export data
    function exportData() {
      const data = localStorage.getItem("problems") || "[]";
      const blob = new Blob([data], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "problems.json";
      a.click();
    }

    // ðŸ”¹ Import data
    function importData(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        try {
          const imported = JSON.parse(e.target.result);
          localStorage.setItem("problems", JSON.stringify(imported));
          problems = imported;
          showMessage("Data imported successfully âœ…", "success");
          renderTable();
        } catch (err) {
          alert("Invalid file");
        }
      };
      reader.readAsText(file);
    }

    addBtn.addEventListener("click", checkProblem);
    inputId.addEventListener("keydown", e => { if (e.key === "Enter") checkProblem(); });

    renderTable();
  </script>
</body>

</html>
